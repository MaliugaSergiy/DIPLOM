(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

$(document).ready(function () {

    //Vacancies datas from google spreadsheets
    //
    if (document.getElementById("vacancies_base")) {
        $.getJSON("https://spreadsheets.google.com/feeds/list/1Jl9jZ7S8tCzWjtseppatWxOhICcAo46h3sUS_JjSV9w/od6/public/values?alt=json", function (data) {
            //console.log(data['feed']['entry']);
            var data = data['feed']['entry'];
            var vacan = [];

            for (var key in data) {
                var id = data[key]['gsx$id']['$t'];
                var name = data[key]['gsx$name']['$t'];
                var descr = data[key]['gsx$descr']['$t'];
                vacan[id] = {};
                vacan[id]['name'] = name;
                vacan[id]['descr'] = descr;
            }

            vacan = vacan.reverse();
            var objVacan = {};
            objVacan.objV = vacan;

            var $collapsible = $(".collapsible");
            var source = $("#vacancies_base").html();
            var template = Handlebars.compile(source);
            var html = template(objVacan);
            $collapsible.append(html);

            $(".collapsible li:first-child").addClass("active");
            $(".collapsible li:first-child .collapsible-header").addClass("active");
            //materializecss accordion (collapsible)
            $('.collapsible').collapsible();
        });
    }

    // Handelbars
    if (document.getElementById("prod_container")) {
        var $prod_container = $("#prod_container");
        $.ajax({
            url: "base.json"
        }).done(function (data) {
            console.log(data);
            var source = $("#goods").html();
            var template = Handlebars.compile(source);
            var html = template(data);
            $prod_container.append(html);

            $("#prod_container").slick({
                dots: false,
                infinite: true,
                speed: 1200,
                slidesToShow: 4,
                slidesToScroll: 4,
                autoplay: true,
                autoplaySpeed: 3000,
                arrows: false,
                responsive: [{
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 3,
                        infinite: true
                    }
                }, {
                    breakpoint: 850,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2,
                        infinite: true
                    }
                }, {
                    breakpoint: 560,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        infinite: true
                    }
                }]
            });
        });
    }

    if (document.getElementById("first_ctalog_content")) {
        var $first_ctalog_content = $("#first_ctalog_content");
        $.ajax({
            url: "base.json"
        }).done(function (data) {
            console.log(data.goodCategory[1]);
            var source = $("#first_ctalog").html();
            var template = Handlebars.compile(source);
            var html = template(data.goodCategory[1]);
            $first_ctalog_content.append(html);
        });
    }

    $('[data-remodal-id=modal]').remodal();

    //materializecss modal init
    $('.modal').modal();

    //loading of header content
    $("header").load("templates/header.html", function () {
        var _$$dropdown;

        // meterializecss droppDown
        $('.dropdown-button').dropdown((_$$dropdown = {
            inDuration: 300,
            outDuration: 225,
            constrainWidth: false, // Does not change width of dropdown to that of the activator
            hover: false, // Activate on hover
            gutter: 0, // Spacing from edge
            belowOrigin: true, // Displays dropdown below the button
            alignment: 'left' }, _defineProperty(_$$dropdown, "gutter", -110), _defineProperty(_$$dropdown, "stopPropagation", false), _$$dropdown));
        // slide and swipe menu init
        $('nav').slideAndSwipe();

        $(".ssm-toggle-nav").on("click", function () {
            //$("body").toggleClass("body_OH");
        });

        document.addEventListener("keydown", keyDownTextField, false);

        function keyDownTextField(e) {
            var keyCode = e.keyCode;
            if (keyCode == 27) {}
        }

        //header behaviour by scrolling
        var $header = $("header"),
            $aside = $("aside");

        $.scrollDetection({
            scrollDown: function scrollDown() {
                $header.css("top", "-80px");
                $aside.css("top", "0");
            },
            scrollUp: function scrollUp() {
                $header.css("top", "0");
                $aside.css("top", "80px");
            }
        });
    });
    $("footer").load("templates/footer.html");

    // setting for slick-sliders
    $('.start_slider').slick({
        infinite: true,
        autoplay: true,
        autoplaySpeed: 5000,
        dots: true,
        fade: true,
        cssEase: 'linear'

    });

    $('.slider-another').slick({
        infinite: true,
        slidesToShow: 4,
        slidesToScroll: 4,
        dots: false,
        fade: false,
        cssEase: 'linear',
        responsive: [{
            breakpoint: 750,
            settings: {
                slidesToShow: 3,
                slidesToScroll: 3
            }
        }, {
            breakpoint: 520,
            settings: {
                slidesToShow: 2,
                slidesToScroll: 2
            }
        }]

    });

    $('.slider-for').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: false,
        fade: true,
        asNavFor: '.slider-nav'
    });

    $('.slider-for').slickLightbox({
        src: 'href',
        itemSelector: 'a'
    });

    $('.slider-nav').slick({
        slidesToShow: 3,
        slidesToScroll: 1,
        asNavFor: '.slider-for',
        autoplay: true,
        autoplaySpeed: 3000,
        centerMode: true,
        arrows: true,
        centerPadding: 0,
        focusOnSelect: true,
        responsive: [{
            breakpoint: 520,
            settings: {
                slidesToShow: 2,
                slidesToScroll: 2
            }
        }]
    });

    // pollyfil for css property position sticky
    $('aside').Stickyfill();
    //    $("aside").sticky({
    //        topSpacing: 80
    //    });
    //    $('aside').on('sticky-start', function () {
    //        console.log("Started");
    //    });
    //    $('aside').on('sticky-end', function () {
    //        console.log("Ended");
    //    });
    //    $('aside').on('sticky-update', function () {
    //        console.log("Update");
    //    });
    //    $('aside').on('sticky-bottom-reached', function () {
    //        console.log("Bottom reached");
    //    });
    //    $('aside').on('sticky-bottom-unreached', function () {
    //        console.log("Bottom unreached");
    //    });
    //    $("aside").unstick();


    //WOW init
    new WOW().init();

    //    function setWidth() {
    //        var windowWidth = window.screen.width;
    //        $(".area-bag").css("with", windowWidth);  
    //    }
    //    setWidth();
    //    window.onresize = function() {
    //        setWidth();
    //    }


    //Form VAlidation 

    $("#js_register_form, #js_register_form2").validate({
        rules: {
            form_name: {
                required: true
            },
            form_email: {
                required: true,
                email: true
            },
            form_phone: {
                required: true,
                minlenhth: 10,
                digits: true
            }
        },
        messages: {
            form_name: {
                required: "	&uarr; Обязательное поле"
            },
            form_email: {
                required: "	&uarr; Обязательное поле",
                email: "	Не корректный Email"
            },
            form_phone: {
                required: "	&uarr; Обязательное поле"
            }
        },
        focusCleanup: true,
        focusInvalid: false
    });

    //phone input mask
    $("#form_phone").mask("(999) 999-99-99");

    // parallax init
    //    $('.parallax').parallax();


    // buttton UP
    // button arrow to UP

    $("body").append("<button class='btn_up'/>");

    $(window).scroll(function () {
        var windscroll = $(window).scrollTop();
        if ($(window).scrollTop() > 50) {
            $(".btn_up").addClass("activeB");
        } else {
            $(".btn_up").removeClass("activeB");
        }
    });

    $(".btn_up").on("click", function (e) {
        e.preventDefault();
        $(this).removeClass("activeB");
        $("body").animate({
            'scrollTop': 0
        }, 800);
        $("html").animate({
            'scrollTop': 0
        }, 800);
    });
});
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZXYvanMvY29tbW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICAgIC8vVmFjYW5jaWVzIGRhdGFzIGZyb20gZ29vZ2xlIHNwcmVhZHNoZWV0c1xuICAgIC8vXG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmFjYW5jaWVzX2Jhc2VcIikpIHtcbiAgICAgICAgJC5nZXRKU09OKFwiaHR0cHM6Ly9zcHJlYWRzaGVldHMuZ29vZ2xlLmNvbS9mZWVkcy9saXN0LzFKbDlqWjdTOHRDeldqdHNlcHBhdFd4T2hJQ2NBbzQ2aDNzVVNfSmpTVjl3L29kNi9wdWJsaWMvdmFsdWVzP2FsdD1qc29uXCIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGRhdGFbJ2ZlZWQnXVsnZW50cnknXSk7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IGRhdGFbJ2ZlZWQnXVsnZW50cnknXTtcbiAgICAgICAgICAgIHZhciB2YWNhbiA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IGRhdGFba2V5XVsnZ3N4JGlkJ11bJyR0J107XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBkYXRhW2tleV1bJ2dzeCRuYW1lJ11bJyR0J107XG4gICAgICAgICAgICAgICAgdmFyIGRlc2NyID0gZGF0YVtrZXldWydnc3gkZGVzY3InXVsnJHQnXTtcbiAgICAgICAgICAgICAgICB2YWNhbltpZF0gPSB7fTtcbiAgICAgICAgICAgICAgICB2YWNhbltpZF1bJ25hbWUnXSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgdmFjYW5baWRdWydkZXNjciddID0gZGVzY3I7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhY2FuID0gdmFjYW4ucmV2ZXJzZSgpO1xuICAgICAgICAgICAgdmFyIG9ialZhY2FuID0ge307XG4gICAgICAgICAgICBvYmpWYWNhbi5vYmpWID0gdmFjYW47XG5cbiAgICAgICAgICAgIHZhciAkY29sbGFwc2libGUgPSAkKFwiLmNvbGxhcHNpYmxlXCIpO1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9ICQoXCIjdmFjYW5jaWVzX2Jhc2VcIikuaHRtbCgpO1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKHNvdXJjZSk7XG4gICAgICAgICAgICB2YXIgaHRtbCA9IHRlbXBsYXRlKG9ialZhY2FuKTtcbiAgICAgICAgICAgICRjb2xsYXBzaWJsZS5hcHBlbmQoaHRtbCk7XG5cbiAgICAgICAgICAgICQoXCIuY29sbGFwc2libGUgbGk6Zmlyc3QtY2hpbGRcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKFwiLmNvbGxhcHNpYmxlIGxpOmZpcnN0LWNoaWxkIC5jb2xsYXBzaWJsZS1oZWFkZXJcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAvL21hdGVyaWFsaXplY3NzIGFjY29yZGlvbiAoY29sbGFwc2libGUpXG4gICAgICAgICAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBIYW5kZWxiYXJzXG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZF9jb250YWluZXJcIikpIHtcbiAgICAgICAgdmFyICRwcm9kX2NvbnRhaW5lciA9ICQoXCIjcHJvZF9jb250YWluZXJcIik7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiYmFzZS5qc29uXCJcbiAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gJChcIiNnb29kc1wiKS5odG1sKCk7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoc291cmNlKTtcbiAgICAgICAgICAgIHZhciBodG1sID0gdGVtcGxhdGUoZGF0YSk7XG4gICAgICAgICAgICAkcHJvZF9jb250YWluZXIuYXBwZW5kKGh0bWwpO1xuXG4gICAgICAgICAgICAkKFwiI3Byb2RfY29udGFpbmVyXCIpLnNsaWNrKHtcbiAgICAgICAgICAgICAgICBkb3RzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzcGVlZDogMTIwMCxcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDQsXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDQsXG4gICAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWUsXG4gICAgICAgICAgICAgICAgYXV0b3BsYXlTcGVlZDogMzAwMCxcbiAgICAgICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IFt7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDEwMjQsXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZmluaXRlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDg1MCxcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNTYwLFxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaXJzdF9jdGFsb2dfY29udGVudFwiKSkge1xuICAgICAgICB2YXIgJGZpcnN0X2N0YWxvZ19jb250ZW50ID0gJChcIiNmaXJzdF9jdGFsb2dfY29udGVudFwiKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJiYXNlLmpzb25cIlxuICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmdvb2RDYXRlZ29yeVsxXSk7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gJChcIiNmaXJzdF9jdGFsb2dcIikuaHRtbCgpO1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKHNvdXJjZSk7XG4gICAgICAgICAgICB2YXIgaHRtbCA9IHRlbXBsYXRlKGRhdGEuZ29vZENhdGVnb3J5WzFdKTtcbiAgICAgICAgICAgICRmaXJzdF9jdGFsb2dfY29udGVudC5hcHBlbmQoaHRtbCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQoJ1tkYXRhLXJlbW9kYWwtaWQ9bW9kYWxdJykucmVtb2RhbCgpO1xuXG4gICAgLy9tYXRlcmlhbGl6ZWNzcyBtb2RhbCBpbml0XG4gICAgJCgnLm1vZGFsJykubW9kYWwoKTtcblxuICAgIC8vbG9hZGluZyBvZiBoZWFkZXIgY29udGVudFxuICAgICQoXCJoZWFkZXJcIikubG9hZChcInRlbXBsYXRlcy9oZWFkZXIuaHRtbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfJCRkcm9wZG93bjtcblxuICAgICAgICAvLyBtZXRlcmlhbGl6ZWNzcyBkcm9wcERvd25cbiAgICAgICAgJCgnLmRyb3Bkb3duLWJ1dHRvbicpLmRyb3Bkb3duKChfJCRkcm9wZG93biA9IHtcbiAgICAgICAgICAgIGluRHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgIG91dER1cmF0aW9uOiAyMjUsXG4gICAgICAgICAgICBjb25zdHJhaW5XaWR0aDogZmFsc2UsIC8vIERvZXMgbm90IGNoYW5nZSB3aWR0aCBvZiBkcm9wZG93biB0byB0aGF0IG9mIHRoZSBhY3RpdmF0b3JcbiAgICAgICAgICAgIGhvdmVyOiBmYWxzZSwgLy8gQWN0aXZhdGUgb24gaG92ZXJcbiAgICAgICAgICAgIGd1dHRlcjogMCwgLy8gU3BhY2luZyBmcm9tIGVkZ2VcbiAgICAgICAgICAgIGJlbG93T3JpZ2luOiB0cnVlLCAvLyBEaXNwbGF5cyBkcm9wZG93biBiZWxvdyB0aGUgYnV0dG9uXG4gICAgICAgICAgICBhbGlnbm1lbnQ6ICdsZWZ0JyB9LCBfZGVmaW5lUHJvcGVydHkoXyQkZHJvcGRvd24sIFwiZ3V0dGVyXCIsIC0xMTApLCBfZGVmaW5lUHJvcGVydHkoXyQkZHJvcGRvd24sIFwic3RvcFByb3BhZ2F0aW9uXCIsIGZhbHNlKSwgXyQkZHJvcGRvd24pKTtcbiAgICAgICAgLy8gc2xpZGUgYW5kIHN3aXBlIG1lbnUgaW5pdFxuICAgICAgICAkKCduYXYnKS5zbGlkZUFuZFN3aXBlKCk7XG5cbiAgICAgICAgJChcIi5zc20tdG9nZ2xlLW5hdlwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vJChcImJvZHlcIikudG9nZ2xlQ2xhc3MoXCJib2R5X09IXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBrZXlEb3duVGV4dEZpZWxkLCBmYWxzZSk7XG5cbiAgICAgICAgZnVuY3Rpb24ga2V5RG93blRleHRGaWVsZChlKSB7XG4gICAgICAgICAgICB2YXIga2V5Q29kZSA9IGUua2V5Q29kZTtcbiAgICAgICAgICAgIGlmIChrZXlDb2RlID09IDI3KSB7fVxuICAgICAgICB9XG5cbiAgICAgICAgLy9oZWFkZXIgYmVoYXZpb3VyIGJ5IHNjcm9sbGluZ1xuICAgICAgICB2YXIgJGhlYWRlciA9ICQoXCJoZWFkZXJcIiksXG4gICAgICAgICAgICAkYXNpZGUgPSAkKFwiYXNpZGVcIik7XG5cbiAgICAgICAgJC5zY3JvbGxEZXRlY3Rpb24oe1xuICAgICAgICAgICAgc2Nyb2xsRG93bjogZnVuY3Rpb24gc2Nyb2xsRG93bigpIHtcbiAgICAgICAgICAgICAgICAkaGVhZGVyLmNzcyhcInRvcFwiLCBcIi04MHB4XCIpO1xuICAgICAgICAgICAgICAgICRhc2lkZS5jc3MoXCJ0b3BcIiwgXCIwXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNjcm9sbFVwOiBmdW5jdGlvbiBzY3JvbGxVcCgpIHtcbiAgICAgICAgICAgICAgICAkaGVhZGVyLmNzcyhcInRvcFwiLCBcIjBcIik7XG4gICAgICAgICAgICAgICAgJGFzaWRlLmNzcyhcInRvcFwiLCBcIjgwcHhcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgICQoXCJmb290ZXJcIikubG9hZChcInRlbXBsYXRlcy9mb290ZXIuaHRtbFwiKTtcblxuICAgIC8vIHNldHRpbmcgZm9yIHNsaWNrLXNsaWRlcnNcbiAgICAkKCcuc3RhcnRfc2xpZGVyJykuc2xpY2soe1xuICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICAgICAgYXV0b3BsYXk6IHRydWUsXG4gICAgICAgIGF1dG9wbGF5U3BlZWQ6IDUwMDAsXG4gICAgICAgIGRvdHM6IHRydWUsXG4gICAgICAgIGZhZGU6IHRydWUsXG4gICAgICAgIGNzc0Vhc2U6ICdsaW5lYXInXG5cbiAgICB9KTtcblxuICAgICQoJy5zbGlkZXItYW5vdGhlcicpLnNsaWNrKHtcbiAgICAgICAgaW5maW5pdGU6IHRydWUsXG4gICAgICAgIHNsaWRlc1RvU2hvdzogNCxcbiAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDQsXG4gICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICBmYWRlOiBmYWxzZSxcbiAgICAgICAgY3NzRWFzZTogJ2xpbmVhcicsXG4gICAgICAgIHJlc3BvbnNpdmU6IFt7XG4gICAgICAgICAgICBicmVha3BvaW50OiA3NTAsXG4gICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogM1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBicmVha3BvaW50OiA1MjAsXG4gICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMlxuICAgICAgICAgICAgfVxuICAgICAgICB9XVxuXG4gICAgfSk7XG5cbiAgICAkKCcuc2xpZGVyLWZvcicpLnNsaWNrKHtcbiAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgICAgZmFkZTogdHJ1ZSxcbiAgICAgICAgYXNOYXZGb3I6ICcuc2xpZGVyLW5hdidcbiAgICB9KTtcblxuICAgICQoJy5zbGlkZXItZm9yJykuc2xpY2tMaWdodGJveCh7XG4gICAgICAgIHNyYzogJ2hyZWYnLFxuICAgICAgICBpdGVtU2VsZWN0b3I6ICdhJ1xuICAgIH0pO1xuXG4gICAgJCgnLnNsaWRlci1uYXYnKS5zbGljayh7XG4gICAgICAgIHNsaWRlc1RvU2hvdzogMyxcbiAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgIGFzTmF2Rm9yOiAnLnNsaWRlci1mb3InLFxuICAgICAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICAgICAgYXV0b3BsYXlTcGVlZDogMzAwMCxcbiAgICAgICAgY2VudGVyTW9kZTogdHJ1ZSxcbiAgICAgICAgYXJyb3dzOiB0cnVlLFxuICAgICAgICBjZW50ZXJQYWRkaW5nOiAwLFxuICAgICAgICBmb2N1c09uU2VsZWN0OiB0cnVlLFxuICAgICAgICByZXNwb25zaXZlOiBbe1xuICAgICAgICAgICAgYnJlYWtwb2ludDogNTIwLFxuICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV1cbiAgICB9KTtcblxuICAgIC8vIHBvbGx5ZmlsIGZvciBjc3MgcHJvcGVydHkgcG9zaXRpb24gc3RpY2t5XG4gICAgJCgnYXNpZGUnKS5TdGlja3lmaWxsKCk7XG4gICAgLy8gICAgJChcImFzaWRlXCIpLnN0aWNreSh7XG4gICAgLy8gICAgICAgIHRvcFNwYWNpbmc6IDgwXG4gICAgLy8gICAgfSk7XG4gICAgLy8gICAgJCgnYXNpZGUnKS5vbignc3RpY2t5LXN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0ZWRcIik7XG4gICAgLy8gICAgfSk7XG4gICAgLy8gICAgJCgnYXNpZGUnKS5vbignc3RpY2t5LWVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgICAgICAgY29uc29sZS5sb2coXCJFbmRlZFwiKTtcbiAgICAvLyAgICB9KTtcbiAgICAvLyAgICAkKCdhc2lkZScpLm9uKCdzdGlja3ktdXBkYXRlJywgZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICAgICBjb25zb2xlLmxvZyhcIlVwZGF0ZVwiKTtcbiAgICAvLyAgICB9KTtcbiAgICAvLyAgICAkKCdhc2lkZScpLm9uKCdzdGlja3ktYm90dG9tLXJlYWNoZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICAgICAgIGNvbnNvbGUubG9nKFwiQm90dG9tIHJlYWNoZWRcIik7XG4gICAgLy8gICAgfSk7XG4gICAgLy8gICAgJCgnYXNpZGUnKS5vbignc3RpY2t5LWJvdHRvbS11bnJlYWNoZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICAgICAgIGNvbnNvbGUubG9nKFwiQm90dG9tIHVucmVhY2hlZFwiKTtcbiAgICAvLyAgICB9KTtcbiAgICAvLyAgICAkKFwiYXNpZGVcIikudW5zdGljaygpO1xuXG5cbiAgICAvL1dPVyBpbml0XG4gICAgbmV3IFdPVygpLmluaXQoKTtcblxuICAgIC8vICAgIGZ1bmN0aW9uIHNldFdpZHRoKCkge1xuICAgIC8vICAgICAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuc2NyZWVuLndpZHRoO1xuICAgIC8vICAgICAgICAkKFwiLmFyZWEtYmFnXCIpLmNzcyhcIndpdGhcIiwgd2luZG93V2lkdGgpOyAgXG4gICAgLy8gICAgfVxuICAgIC8vICAgIHNldFdpZHRoKCk7XG4gICAgLy8gICAgd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgICAgIHNldFdpZHRoKCk7XG4gICAgLy8gICAgfVxuXG5cbiAgICAvL0Zvcm0gVkFsaWRhdGlvbiBcblxuICAgICQoXCIjanNfcmVnaXN0ZXJfZm9ybSwgI2pzX3JlZ2lzdGVyX2Zvcm0yXCIpLnZhbGlkYXRlKHtcbiAgICAgICAgcnVsZXM6IHtcbiAgICAgICAgICAgIGZvcm1fbmFtZToge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybV9lbWFpbDoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVtYWlsOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybV9waG9uZToge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1pbmxlbmh0aDogMTAsXG4gICAgICAgICAgICAgICAgZGlnaXRzOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgICAgICBmb3JtX25hbWU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogXCJcdCZ1YXJyOyDQntCx0Y/Qt9Cw0YLQtdC70YzQvdC+0LUg0L/QvtC70LVcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcm1fZW1haWw6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogXCJcdCZ1YXJyOyDQntCx0Y/Qt9Cw0YLQtdC70YzQvdC+0LUg0L/QvtC70LVcIixcbiAgICAgICAgICAgICAgICBlbWFpbDogXCJcdNCd0LUg0LrQvtGA0YDQtdC60YLQvdGL0LkgRW1haWxcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcm1fcGhvbmU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogXCJcdCZ1YXJyOyDQntCx0Y/Qt9Cw0YLQtdC70YzQvdC+0LUg0L/QvtC70LVcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBmb2N1c0NsZWFudXA6IHRydWUsXG4gICAgICAgIGZvY3VzSW52YWxpZDogZmFsc2VcbiAgICB9KTtcblxuICAgIC8vcGhvbmUgaW5wdXQgbWFza1xuICAgICQoXCIjZm9ybV9waG9uZVwiKS5tYXNrKFwiKDk5OSkgOTk5LTk5LTk5XCIpO1xuXG4gICAgLy8gcGFyYWxsYXggaW5pdFxuICAgIC8vICAgICQoJy5wYXJhbGxheCcpLnBhcmFsbGF4KCk7XG5cblxuICAgIC8vIGJ1dHR0b24gVVBcbiAgICAvLyBidXR0b24gYXJyb3cgdG8gVVBcblxuICAgICQoXCJib2R5XCIpLmFwcGVuZChcIjxidXR0b24gY2xhc3M9J2J0bl91cCcvPlwiKTtcblxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgd2luZHNjcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDUwKSB7XG4gICAgICAgICAgICAkKFwiLmJ0bl91cFwiKS5hZGRDbGFzcyhcImFjdGl2ZUJcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiLmJ0bl91cFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZUJcIik7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICQoXCIuYnRuX3VwXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiYWN0aXZlQlwiKTtcbiAgICAgICAgJChcImJvZHlcIikuYW5pbWF0ZSh7XG4gICAgICAgICAgICAnc2Nyb2xsVG9wJzogMFxuICAgICAgICB9LCA4MDApO1xuICAgICAgICAkKFwiaHRtbFwiKS5hbmltYXRlKHtcbiAgICAgICAgICAgICdzY3JvbGxUb3AnOiAwXG4gICAgICAgIH0sIDgwMCk7XG4gICAgfSk7XG59KTsiXX0=
